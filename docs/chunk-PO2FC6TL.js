import{a as E,b as u}from"./chunk-5NKRDAOO.js";import{Ga as I,Ia as M,Ja as S,Ka as s,L as g,La as o,Ma as f,Sa as d,T as w,Ta as c,W as C,Xa as _,va as n,wa as b}from"./chunk-H7Y2A2RX.js";import{d as l}from"./chunk-PYQTE2ZK.js";var H=(()=>{let e=class e{constructor(){this._supabaseClient=E(u.supabaseUrl,u.supabaseKey)}getAdvisories(){return l(this,null,function*(){var t=yield this._supabaseClient.from("advisorys").select("*");return t.data})}loadAdvisoryMessagesCount(t){return l(this,null,function*(){var a=yield this._supabaseClient.from("advisory_messages").select("id").eq("advisory_id",t.id);return t.messages=a.data?.length,t})}getAdvisoryById(t){return l(this,null,function*(){var a=yield this._supabaseClient.from("advisorys").select("*").eq("id",t);return a.data?.[0]})}getAdvisoryMessages(t){return l(this,null,function*(){var a=yield this._supabaseClient.from("advisory_messages").select("*").eq("advisory_id",t.id);return a.data})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function F(i,e){if(i&1&&(s(0,"p"),d(1),o()),i&2){let T=e.$implicit;n(1),c(T)}}var O=(()=>{let e=class e{constructor(t){this._advisoryService=t,this.advisory={}}ngOnChanges(){return l(this,null,function*(){this.advisory=yield this._advisoryService.loadAdvisoryMessagesCount(this.advisory)})}get sinceTime(){var t=new Date,a=new Date(this.advisory.created),r=t.getTime()-a.getTime(),y=r/1e3,v=y/60,p=v/60,m=p/24,$=m/7,h=m/30,x=m/365;return y<60?"Hace unos segundos":v<60?`Hace ${Math.floor(v)} mins`:p<24?`Hace ${Math.floor(p)} horas`:m<7?`Hace ${Math.floor(m)} d\xEDas`:h<1?`Hace ${Math.floor($)} semanas`:x<1?`Hace ${Math.floor(h)} meses`:`Hace ${Math.floor(x)} a\xF1os`}};e.\u0275fac=function(a){return new(a||e)(b(H))},e.\u0275cmp=w({type:e,selectors:[["app-advisory-card"]],inputs:{advisory:"advisory"},standalone:!0,features:[C,_],decls:21,vars:5,consts:[[1,"bg-white","w-full","rounded-md","p-2","shadow-md","cursor-pointer"],[1,"flex","flex-col","space-y-1"],[1,"flex","flex-row","text-[10px]","items-center","justify-between","text-slate-600"],[1,"font-semibold","w-3/4","truncate"],[1,"w-[27%]","text-right"],[1,"max-h-10","h-10","text-sm","line-clamp-2","text-slate-700"],[1,""],[1,"w-full","max-h-8","h-8","text-xs","line-clamp-2","text-slate-500"],[1,"flex","flex-row","justify-end","items-center","space-x-1","text-xs","text-slate-800"],[1,"fa-solid","fa-message"],[1,"text-[8px]","line-clamp-1"]],template:function(a,r){a&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),d(4),o(),s(5,"p",4),d(6),o()(),s(7,"div",5)(8,"p",6),d(9),o()(),s(10,"div",7)(11,"p"),d(12),o()(),s(13,"div",8),f(14,"i",9),s(15,"p"),d(16),o()(),f(17,"hr"),s(18,"div",10),M(19,F,2,1,"p",null,I),o()()()),a&2&&(n(4),c(r.advisory.owner),n(2),c(r.sinceTime),n(3),c(r.advisory.title),n(3),c(r.advisory.content),n(4),c(r.advisory.messages),n(3),S(r.advisory.tags))},styles:["[_nghost-%COMP%]{display:block}"]});let i=e;return i})();export{H as a,O as b};
